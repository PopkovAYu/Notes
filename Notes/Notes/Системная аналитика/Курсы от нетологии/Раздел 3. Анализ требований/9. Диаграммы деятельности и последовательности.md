# 1. Диаграмма деятельности (Activity Diagram)
- Динамическое представление системы
- Представляет поток данных от функции к функции
- Схожа с блок-схемой
Применяется, когда надо нагляднее описать ВИ с большим количеством ветвлений (схожа с BPMN)

Элементы:

| Наименование                                                                                | Назначение                                                                                                    | Обозначение                                  |
| ------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------- | -------------------------------------------- |
| Inintial Node, начальный узел                                                               | Точка начала процесса                                                                                         | Черный закрашенный круг                      |
| Control Flow, поток управления                                                              | Направление процесса                                                                                          | Стрелка (всегда в одну сторону)              |
| Action, действие (глагол + существительное)                                                 | Шаг (атомарный) процесса                                                                                      | Скругленный прямоугольник                    |
| Activity, деятельность (используется для упрощения диаграмм, зависит от уровня детализации) | Связка шагов (подпроцесс)                                                                                     | Скругленный прямоугольник с вилкой           |
| Decision, узел решения                                                                      | Выбор: процесс может идти по одному из путей в зависимости от условия                                         | Ромбик                                       |
| Guard condtion, условие ветвления                                                           | Варианты выбора на пути решения                                                                               | В квадратных скобках рядом с веткой процесса |
| Merge, слияние                                                                              | Точка объединения потоков, без условий ветвления                                                              | Ромбик                                       |
| Fork, вилка                                                                                 | Разветвление на параллельные независимые потоки                                                               | Черный узкий прямоугольник                   |
| Join, схождение                                                                             | Схождение параллельных потоков                                                                                | Черный узкий прямоугольник                   |
| Final Node, окончание процесса                                                              | Окончание всего процесса                                                                                      | Черный круг с обводкой                       |
| End of Flow, окончание потока                                                               | Окончание для потока, не вливающегося в общий поток. Должен быть закончен отдельно, а основной при этом - нет | Круг с Х внутри                              |
**Пример:**
```plantuml
@startuml

start

switch ()
case ( Case A )
	:Action 1;
case ( Case B )
	:Action 2;
case ( Case C )
	:Action 3;
endswitch

:Action 4;

fork
	:Action 5;
	end
fork again
	:Action 6;
fork again
	:Action 7;
end fork

stop

@enduml
```
**Условия ветвления**
- Взаимоисключающие
- Совокупность условий:
	- не должна содержать перекрытий
	- покрывает все случаи
У диаграммы также имеются дорожки (как у BPMN) - пример в домашнем задании

# 2. Диаграмма последовательности (Sequence Diagram)
- Отображает потоки данных между компонентами системы/между внешними системами/микросервисами
- 3 типа данных
	- Синхронное сообщение
	- Ответное сообщение
	- Асинхронное сообщение
**Пример**
```plantuml
@startuml

actor User as user
participant "Mobile application" as app
database Database as db
queue Server as server

autonumber
activate user
user -> app : Активировать элемент управления
par
	activate app
	app -> server : Отправить запрос в очередь	
	activate server
	app ->> db : Сохранить запрос в кэш
end
opt
	user -> app : Сделать скриншот
end
deactivate user
alt Операция успешна
	app <-- server : Передать ответ
	app -> app : Отобразить сообщение
else Истек Timeout
	app <-- server : Передать код ошибки
	deactivate server
	loop 2 раза
		app -> db : Сохранить лог ошибки
	end
alt Ошибка А
	app -> app : Отобразить инструкцию А
end
alt Ошибка Б
	app -> app : Отобразить инструкцию Б
end
alt Ошибка В
	app -> app : Отобразить инструкцию В
end
end
deactivate app
@enduml
```
--- - линия жизни объекта
закрашенная стрелка - синхронный запрос
не закрашенная стрелка - асинхронный запрос
прерывистая стрелка - ответ
прямоугольник на прерывистой линии - время активности объекта
par - параллельное выполнение действий
opt - опциональное действие
alt - альтернативные потоки, могут быть вложенными
loop -  цикл

```plantuml
@startuml

autonumber

title "Поиск и заказ товаров в интернет магазине"

actor "Пользователь" as user

box Internet
participant "User Interface" as ui
end box

box Authorization Server
participant "authorization-api" as auth
end box

box Server
participant "catalog-api" as cat
participant "order-api" as ord
end box

box Database
database "catalog-db" as catdb
database "order-db" as orddb
end box

user -> ui: запрос авторизации
activate user
activate ui
ui -> auth: отправка данных
activate auth
alt #LightBlue Авторизация успешна
auth --> ui: данные прошли проверку
ui --> user: авторизация успешна
else #Pink Авторизация не успешна
autonumber 3.1
auth --> ui: данные не прошли проверку
ui --> user: авторизация неуспешна
deactivate auth
end alt
autonumber 5
user -> ui: запрос товара
ui -> cat: поиск товара
activate cat
cat -> catdb: поиск товара в бд
activate catdb
catdb --> cat: ответ бд
deactivate catdb
cat --> ui: отображение данных о товаре
deactivate cat
ui --> user: отображение искомого товара

user -> ui: запрос на заказ товара
ui -> ord: запрос на создание заказа
activate ord
ord -> orddb: создание заказа в бд
activate orddb
orddb --> ord: заказ создан в бд
deactivate orddb
ord --> ui: уведомление о созданном заказе
deactivate ord
ui --> user: заказ успешно создан


deactivate ui
deactivate user


@enduml
```
